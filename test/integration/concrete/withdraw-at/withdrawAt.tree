WithdrawAt_Integration_Concrete_Test
├── when delegate call
│  └── it should revert
└── when no delegate call
   ├── given null
   │  └── it should revert
   └── given not null
      ├── when time less than snapshot time
      │   └── it should revert
      ├── when time greater than current time
      │   └── it should revert
      └── when time between snapshot time and current time
          ├── when withdrawal address zero
          │  └── it should revert
          └── when withdrawal address not zero
             ├── when withdrawal address not owner
             │  ├── when caller sender
             │  │  └── it should revert
             │  ├── when caller unknown
             │  │  └── it should revert
             │  └── when caller recipient
             │     └── it should withdraw
             └── when withdrawal address owner
                ├── given balance zero
                │  └── it should revert
                └── given balance not zero
                   ├── when total debt exceeds balance
                   │  └── it should withdraw the balance
                   └── when total debt not exceed balance
                      ├── given protocol fee not zero
                      │  ├── it should update the protocol revenue
                      │  └── it should withdraw the net amount
                      └── given protocol fee zero
                         ├── given token has 18 decimals
                         │  └── it should make the withdrawal
                         └── given token not have 18 decimals
                            ├── it should withdraw the withdrawable amount
                            ├── it should decrease the total debt by withdrawn value
                            ├── it should reduce the stream balance by the withdrawn amount
                            ├── it should update snapshot time
                            ├── it should emit 1 {Transfer}, 1 {WithdrawFromFlowStream}  and 1 {MetadataUpdated} events
                            └── it should return the withdrawn amount